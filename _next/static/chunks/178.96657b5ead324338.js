"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{5178:function(e,r,t){t.r(r),t.d(r,{default:function(){return K}});var a=t(7437),s=t(2265),l=t(5253),n=t(3549),i=t(6573),d=t(4235),o=t(39),c=t(7978),u=t(9223),f=t(7586),h=t(7042),m=t(4769);function x(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,m.m6)((0,h.W)(r))}let g=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:x("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});g.displayName="Card";let v=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:x("p-6 pt-0",t),...s})});v.displayName="CardContent";var p=t(6743),b=t(9213);let y=(0,b.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(p.f,{ref:r,className:x(y(),t),...s})});j.displayName=p.f.displayName;var N=t(9540);let w=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsxs)(N.fC,{ref:r,className:x("relative flex w-full touch-none select-none items-center",t),...s,children:[(0,a.jsx)(N.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,a.jsx)(N.e6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(N.bU,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});w.displayName=N.fC.displayName;var k=t(7256);let M=(0,b.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),C=s.forwardRef((e,r)=>{let{className:t,variant:s,size:l,asChild:n=!1,...i}=e,d=n?k.g7:"button";return(0,a.jsx)(d,{className:x(M({variant:s,size:l,className:t})),ref:r,...i})});C.displayName="Button";let S=(0,b.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),A=s.forwardRef((e,r)=>{let{className:t,variant:s,...l}=e;return(0,a.jsx)("div",{ref:r,role:"alert",className:x(S({variant:s}),t),...l})});A.displayName="Alert";let R=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:x("text-sm [&_p]:leading-relaxed",t),...s})});R.displayName="AlertDescription";var _=t(5674);let V={1.28:.9,1.44:.925,1.645:.95,1.96:.975,2.326:.99,2.576:.995,2.807:.9975,3.291:.999},q=e=>{let r=1-(1-e/100)/2;return parseFloat(Object.entries(V).reduce((e,t)=>Math.abs(Number(t[1])-r)<Math.abs(Number(e[1])-r)?t:e)[0])};var K=()=>{let[e,r]=(0,s.useState)(30),[t,h]=(0,s.useState)(95),[m,x]=(0,s.useState)(20),[p,b]=(0,s.useState)([]),[y,N]=(0,s.useState)([]),[k,M]=(0,s.useState)(0),[S,V]=(0,s.useState)(!1),[K,E]=(0,s.useState)(""),z=(0,s.useCallback)(()=>{N(Array.from({length:1e4},()=>{let e=0,r=0;for(;0===e;)e=Math.random();for(;0===r;)r=Math.random();return 3.5+Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*r)*1})),M(3.5)},[]),B=(0,s.useCallback)(()=>{V(!0),E("");try{0===y.length&&z();let r=q(t),a=Array.from({length:m},(t,a)=>{let s=Array.from({length:e},()=>y[Math.floor(Math.random()*y.length)]),l=s.reduce((e,r)=>e+r)/e,n=Math.sqrt(s.reduce((e,r)=>e+Math.pow(r-l,2),0)/(e-1))/Math.sqrt(e),i=r*n;return{id:a+1,x:a,lower:l-i,upper:l+i,mean:l}});b(a)}catch(e){E("計算中にエラーが発生しました。パラメータを確認してください。"),console.error(e)}finally{V(!1)}},[y,e,t,m,z]),{intervalData:D,meanData:F,containsTrue:W}=(0,s.useMemo)(()=>{let e=[],r=[],t=0;return p.forEach(a=>{e.push({id:a.id,x:a.id,y1:a.lower,y2:a.upper}),r.push({id:a.id,x:a.id,mean:a.mean}),a.lower<=k&&k<=a.upper&&t++}),{intervalData:e,meanData:r,containsTrue:t}},[p,k]);return(0,a.jsx)(g,{className:"w-full max-w-4xl mx-auto my-8",children:(0,a.jsx)(v,{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"信頼区間シミュレータ"}),(0,a.jsxs)("a",{href:"https://github.com/yourusername/confidence-interval-simulator",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[(0,a.jsx)(_.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"GitHub"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(j,{children:["標本の大きさ: ",e]}),(0,a.jsx)(w,{value:[e],onValueChange:e=>r(e[0]),min:10,max:100,step:1})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(j,{children:["信頼水準: ",t,"%"]}),(0,a.jsx)(w,{value:[t],onValueChange:e=>h(e[0]),min:80,max:99,step:1})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(j,{children:["試行回数: ",m]}),(0,a.jsx)(w,{value:[m],onValueChange:e=>x(e[0]),min:1,max:100,step:1})]}),(0,a.jsx)(C,{onClick:B,className:"w-full",disabled:S,children:S?"計算中...":"シミュレーション実行"}),K&&(0,a.jsx)(A,{variant:"destructive",children:(0,a.jsx)(R,{children:K})}),p.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"h-96",children:(0,a.jsx)(l.h,{width:"100%",height:"100%",children:(0,a.jsxs)(n.c,{margin:{top:20,right:20,bottom:20,left:40},children:[(0,a.jsx)(i.q,{}),(0,a.jsx)(d.K,{type:"number",dataKey:"x",domain:[0,m+1],ticks:Array.from({length:Math.min(11,m)},(e,r)=>Math.floor(r*(m-1)/Math.min(10,m-1)))}),(0,a.jsx)(o.B,{type:"number",domain:[2.5,4.5],ticks:[2.5,3,3.5,4,4.5]}),(0,a.jsx)(c.d,{y:k,stroke:"red",strokeDasharray:"3 3"}),D.map(e=>(0,a.jsx)(u.x,{data:[{x:e.x,y:e.y1},{x:e.x,y:e.y2}],dataKey:"y",stroke:"#8884d8",strokeWidth:2,dot:!1},e.id)),(0,a.jsx)(f.b,{data:F,dataKey:"mean",fill:"#ff7300",shape:"diamond",r:4})]})})}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsxs)("p",{children:["真の母平均を含む区間の割合: ",(W/m*100).toFixed(1),"%（",W," / ",m,"）"]}),(0,a.jsx)("p",{children:"（赤の点線は真の母平均、オレンジのマークは標本平均）"})]})]})]})})})}}}]);